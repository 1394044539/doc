## 一、概述

Linux和windows一样是操作系统，比windows稳定，大部分时候我们都是把服务部署在Linux上的，且没有可视化界面，因此学会使用Linux的命令是非常重要的，一些Linux的东西都会在命令中进行讲解

实际上Linux中的命令非常非常多，这里也只会列出一部分进行讲解

## 二、Linux一些配置

CentOS 有个很方便的软件安装工具yum，但是默认安装完CentOS，系统里使用的是国外的CentOS更新源，

这就造成了我们使用默认更新源安装或者更新软件时速度很慢的问题，甚至更新失败。
为了使用yum工具能快速的安装更新软件，我们需要将默认的yum更新源配置为国内的更新源。

查看密码

grep 'password' /var/log/mysqld.log

docker run -p 3306:3306 --name mysql02 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.5

```
wget http://repo.mysql.com/MySQL-server-5.5.15-1.linux2.6.x86_64.rpm
```

阿里云的源

```
wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo 
```

或者网易云的源

```
wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo
yum clean all
yum makecache
```

## 二、基本命令

### 全局参数

#### 1、--help

描述：帮助，接在命令后面，用来查看命令的参数和意思

用法：

```
任意命令 --help
```

### 系统相关

#### 1、yum

描述：用来管理软件

语法：

```
yum [options] [command] [package ...]
```

参数：

| 参数          | 作用         |
| ------------- | ------------ |
| -q            | 静默执行     |
| -t            | 忽略错误     |
| -R[分钟]      | 设置等待时间 |
| -y            | 自动应答yes  |
| --skip-broken | 忽略依赖问题 |
| --nogpgcheck  | 忽略GPG验证  |

命令：

| 参数                                | 作用                     |
| ----------------------------------- | ------------------------ |
| check-update                        | 列出所有可更新的软件清单 |
| install <package_name>              | 仅安装指定的软件         |
| update <package_name>               | 更新软件                 |
| list                                | 列出所有可安裝的软件清单 |
| remove <package_name>               | 删除软件包               |
| search \<keyword>                   | 查找软件包               |
| clean [packages,headers,oldheaders] | 清除缓存                 |

常用例子

- 安装软件(以foo-x.x.x.rpm为例）：yum install foo-x.x.x.rpm

- 删除软件：yum remove foo-x.x.x.rpm或者yum erase foo-x.x.x.rpm


- 升级软件：yum upgrade foo或者yum update foo


- 查询信息：yum info foo


- 搜索软件（以包含foo字段为例）：yum search foo


- 显示软件包依赖关系：yum deplist foo


#### 2、shutdown

描述：关键命令

语法：

```shell
shutdown [-t seconds] [-rkhncfF] time [message]
```

参数说明：

| 参数       | 说明                                                         |
| ---------- | ------------------------------------------------------------ |
| -t seconds | 设定在几秒钟之后进行关机程序。                               |
| -k         | 并不会真的关机，只是将警告讯息传送给所有使用者               |
| -r         | 重新开机                                                     |
| -h         | 关机后停机                                                   |
| -n         | 不采用正常程序来关机，用强迫的方式杀掉所有执行中的程序后自行关机 |
| -c         | 取消目前已经进行中的关机动作                                 |
| -f         | 关机时，不做 fsck 动作(检查 Linux 档系统)。                  |
| -F         | 关机时，强迫进行 fsck 动作。                                 |
| time       | 设定关机的时间                                               |
| message    | 传送给所有使用者的警告讯息                                   |

常用例子：

不建议使用

注意点：

- 可以用now代表立即执行，shutdown -h now
- 直接在命令后面接数字代表的是分钟，如shutdown -h 5指的是5分钟后关机 
- 实际上关机有**poweroff**命令，重启有**reboot**命令

### 目录相关

#### 1、mkdir

描述：创建文件夹

语法：

```
mkdir [-p] dirName
```

参数：

| 参数 |                             说明                             |
| ---- | :----------------------------------------------------------: |
| -p   | 递归创建，按照路径创建时，父级路径不存在，如果不加参数，会报错，加上-p则会一起创建 |

常用例子：

- 在当前目录创建文件夹：mkdir test

#### 2、rmdir

描述：删除空文件夹

语法：

```
rmdir [-p] dirName
```

参数：

| 参数 |                             说明                             |
| ---- | :----------------------------------------------------------: |
| -p   | 递归删除空文件夹，按照路径删除时，父级文件夹下面为空会一起删除 |

常用例子：

不用，一般只用rm命令，rmdir只能删除空文件，并不实用

### 文件相关

#### 1、touch

描述：正确的解释应该是修改文件的属性，如果文件不存在则会创建，所以一般该命令就是用来**创建文件**的

语法：

```shell
touch [-acfm][-d<日期时间>][-r<参考文件或目录>] [-t<日期时间>][--help][--version][文件或目录…]
```

参数：

| 参数        | 说明                                     |
| ----------- | ---------------------------------------- |
| a           | 改变档案的读取时间记录                   |
| m           | 改变档案的修改时间记录                   |
| c           | 假如目的档案不存在，不会建立新的档案     |
| f           | 无效                                     |
| r           | 使用参考档的时间记录                     |
| d           | 设定时间与日期，可以使用各种不同的格式   |
| t           | 设定档案的时间记录，格式与 date 指令相同 |
| --no-create | 假如目的档案不存在，不会建立新的档案     |
| --version   | 列出版本讯息                             |

常用例子：

- 创建文件(前提是文件不存在，存在则是修改文件的时间属性为当前系统时间)

  ```shell
  $ touch file.txt
  ```

#### 2、cat

描述：简单理解为查看文件，实际上的意思是连接文件，进行输出，所以也可以应用于重定向等

语法：

```shell
cat [-AbeEnstTuv] [--help] [--version] fileName
```

| 参数 | 说明                                    |
| ---- | --------------------------------------- |
| -n   | 输出行号                                |
| -b   | 输出行号，但是去掉空行                  |
| -s   | 发现连续空行，变为一个空行              |
| -v   | 使用 ^ 和 M- 符号，除了 LFD 和 TAB 之外 |
| -E   | 每行结尾显示$                           |
| -T   | 将 TAB 字符显示为 ^I                    |
| -A   | 等价于 -vET                             |
| -e   | 等价于"-vE"                             |
| -t   | 等价于"-vT"                             |

常用例子：

- 查看文件内容

  ```shell
  cat a.txt
  ```

- 将两个文件写入另一个文件

  ```shell
  cat a.txt b.txt > c.txt	
  ```

- 清空文档内容

  ```shell
  cat /dev/null > test.txt
  ```

注意点：

- 不要使用这个命令查看大文件，比如日志类（不信邪的可以试试）

#### 3、more

描述：一页一页查看文件

语法：

```shell
more [-dlfpcsu] [-num] [+/pattern] [+linenum] [fileNames..]
```

参数：

| 参数      | 说明                                                         |
| --------- | ------------------------------------------------------------ |
| -num      | 一次显示的行数                                               |
| -d        | 在画面下方显示 [Press space to continue, 'q' to quit.]按错键，则会显示 [Press 'h' for instructions.] |
| -l        | 取消遇见特殊字元 ^L（送纸字元）时会暂停的功能                |
| -f        | 计算行数时，以实际上的行数，而非自动换行过后的行数           |
| -p        | 切换页数先清除萤幕后再显示内容                               |
| -c        | 切换页数先显示新内容在清除旧内容                             |
| -u        | 不显示下引号                                                 |
| +/pattern | 正则搜素                                                     |
| +num      | 从第几行开始显示                                             |
| fileNames | 可以阅读负数的文件                                           |

操作命令：

| 操作      | 说明                       |
| --------- | -------------------------- |
| Enter     | 向下一行                   |
| Ctrl+F    | 向下滚动一屏               |
| 空格      | 向下滚动一屏               |
| B或Ctrl+B | 返回上一屏                 |
| =         | 输出当前行号               |
| :f        | 输出文件名和当前行号       |
| V         | 进入vi编译器               |
| !         | 调用Shell执行命令          |
| q         | 退出more                   |
| /字符串   | 会向下找到【字符串】这个字 |

常见例子：

- 查看文件

  ```shell
  #一页20行且看得到行数展示文件
  more -f +20 a.txt
  ```

注意点：

- 依然不建议用more命令查看大文件，因为more是一次加载全部文件的

#### 4、less

描述：一页一页查看文件

语法：

```shell
less [参数] 文件 
```

参数：

| 参数      | 说明                      |
| --------- | ------------------------- |
| -b        | 设置缓冲区大小            |
| -e        | 文件结束后自动离开        |
| -f        | 强迫打开特殊文件          |
| -g        | 只标志最后搜索的关键词    |
| -i        | 忽略搜索时的大小写        |
| -m        | 显示百分比                |
| -N        | 显示行号                  |
| -o 文件名 | 输出到指定文件名中保存    |
| -Q        | 不使用警告音              |
| -s        | 连续的空行变为一行        |
| -x 数字   | 将tab显示为规定数字的空格 |

操作命令：

| 操作              | 说明               |
| ----------------- | ------------------ |
| /字符串           | 向下搜索字符串     |
| ?字符串           | 向上搜索字符串     |
| n                 | 重复前一个搜索     |
| N                 | 反向重复前一个搜索 |
| 空格/f/[pagedown] | 向下翻页           |
| b/[pageup]        | 向上翻页           |
| d                 | 向下翻半页         |
| u                 | 向上翻半页         |
| y/回车            | 向下翻一行         |
| Q                 | 退出less           |

常用例子：

- 查看文件

  ```shell
  less -N text.txt
  ```

注意点：

- more和less的区别

  more是一次性加载全部，less是一屏一屏的加载

#### 5、tail

描述：循环读取文件，约等于可以一直实时查看文件

语法：

```shell
tail [参数] [文件]  
```

参数：

| 参数      | 说明                                 |
| --------- | ------------------------------------ |
| -f        | 循环读取，一直读                     |
| -q        | 不显示处理信息                       |
| -v        | 显示详细处理信息                     |
| -c<数目>  | 显示的字节数                         |
| -n<行数>  | 显示文件尾部n行内容                  |
| --pid=PID | 与-f要结合使用，表示进程的id         |
| -q        | 从不输出给出文件名的首部             |
| -s        | 与-f合用,表示在每次反复的间隔休眠S秒 |

常用命名

- 查看文件(一般用来查看日志)

  ```shell
  tail -500f log.log
  ```

#### 6、vi 或 vim

【vi编辑器的3种模式】
    基本上vi可以分为三种状态，分别是命令模式（command mode）、插入模式（Insert mode）和底行模式（last line mode），各模式的功能区分如下：
1) 命令行模式command mode）
      控制屏幕光标的移动，字符、字或行的删除，查找，移动复制某区段及进入Insert mode下，或者到 last line mode。
      命令行模式下的常用命令：
      【1】控制光标移动：↑，↓，j
      【2】删除当前行：dd 
      【3】查找：/字符
      【4】进入编辑模式：i o a
      【5】进入底行模式：:
      
2) 编辑模式（Insert mode）
      只有在Insert mode下，才可以做文字输入，按「ESC」键可回到命令行模式。
      编辑模式下常用命令：
      【1】ESC 退出编辑模式到命令行模式；
      
3) 底行模式（last line mode）
     将文件保存或退出vi，也可以设置编辑环境，如寻找字符串、列出行号……等。
     底行模式下常用命令：
     【1】退出编辑：   :q
     【2】强制退出：   :q!
     【3】保存并退出：  :wq

打开文件

命令：vi 文件名
示例：打开当前目录下的aa.txt文件     vi aa.txt 或者 vim aa.txt

注意：使用vi编辑器打开文件后，并不能编辑，因为此时处于命令模式，点击键盘i/a/o进入编辑模式。

编辑文件

使用vi编辑器打开文件后点击按键：i ，a或者o即可进入编辑模式。

i:在光标所在字符前开始插入
a:在光标所在字符后开始插入
o:在光标所在行的下面另起一新行插入

保存或者取消编辑

保存文件：

第一步：ESC  进入命令行模式
第二步：:     进入底行模式
第三步：wq     保存并退出编辑

取消编辑：

第一步：ESC  进入命令行模式
第二步：:     进入底行模式
第三步：q!     撤销本次修改并退出编辑

### 磁盘(文件/目录)操作命令

#### 1、cd

描述：切换迷离

语法：

```
cd [dirName]
```

常用例子：

- cd /        切换到根目录
- cd /usr        切换到根目录下的usr目录
- cd ../        切换到上一级目录 或者  cd ..
- cd ~        切换到home目录
- cd -        切换到上次访问的目录

#### 2、ls

描述：查看目录下的文件内容

语法：

```
ls [-alrtAFR] [name...]
```

参数：

| 参数 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| -a   | 显示所有文件及目录 (**.** 开头的隐藏文件也会列出)            |
| -l   | 除文件名称外，亦将文件型态、权限、拥有者、文件大小等资讯详细列出 |
| -r   | 将文件以相反次序显示(原定依英文字母次序)                     |
| -t   | 将文件依建立时间之先后次序列出                               |
| -A   | 同 -a ，但不列出 "." (目前目录) 及 ".." (父目录)             |
| -F   | 在列出的文件名称后加一符号；例如可执行档则加 "*", 目录则加 "/" |
| -R   | 若目录下有文件，则以下之文件亦皆依序列出                     |

常用例子：

- 查看所有文件的详细内容：ll

  ll就是ls -l

- 查看隐藏的文件：ls -a

  可以和-l结合着使用：ls -al

注意点：

- 可以带上路径指定查看哪个路径下的文件夹



#### 3、**<span style='color:red'>*</span>rm**

描述：删除文件/文件夹

语法：

```
rm [options] name...
```

参数：

| 参数 | 说明                           |
| ---- | ------------------------------ |
| -i   | 删除前逐一询问确认，默认会询问 |
| -f   | 无需确认                       |
| -r   | 递归删除                       |

常用例子：

- 删除某文件/文件夹：

  ```shell
  rm -rf 文件名/文件夹名
  ```

- 删除当前目录下的全部文件：

  ```shell
  rm -rf *
  ```

注意点：

- 打死都不要使用rm -rf /，会删掉整个系统的全部目录，而且不可恢复

#### 4、cp

描述：复制文件/文件夹

语法：

```shell
#文件
cp [options] source dest
#文件夹，多个文件或目录复制到某个目录下
cp [options] source... directory
```

参数：

| 参数 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| -a   | 此选项通常在复制目录时使用，它保留链接、文件属性，并复制目录下的所有内容。其作用等于dpr参数组合 |
| -d   | 复制时保留链接。                                             |
| -f   | 覆盖已经存在的目标文件而不给出提示                           |
| -i   | 与 **-f** 选项相反，在覆盖目标文件之前给出提示，要求用户确认是否覆盖，回答 **y** 时目标文件将被覆盖 |
| -p   | 除复制文件的内容外，还把修改时间和访问权限也复制到新文件中   |
| -r   | 递归复制，若给出的源文件是一个目录文件，此时将复制该目录下所有的子目录和文件 |
| -l   | 不复制文件，只是生成链接文件                                 |

常用例子：

- 复制文件到目录下：

  ```shell
  cp test.txt newDir  
  ```

- 复制文件夹到目录下

  ```sh
  cp –r test/ newtest          
  ```

注意点：

- 复制文件一次可以选择多个文件，用空格隔开
- 复制非空目录时，必须加上-r参数，让他递归复制

#### 5、mv

描述：移动文件夹或者重命名

语法：

```cmd
mv [options] source dest
mv [options] source... directory
```

参数：

| 参数 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| -b   | 当目标文件或目录存在时，在执行覆盖前，会为其创建一个备份     |
| -i   | 如果指定移动的源目录或文件与目标的目录或文件同名，则会先询问是否覆盖旧文件，输入 y 表示直接覆盖，输入 n 表示取消该操作 |
| -f   | 如果指定移动的源目录或文件与目标的目录或文件同名，不会询问，直接覆盖旧文件 |
| -n   | 不要覆盖任何已存在的文件或目录                               |
| -u   | 源文件比目标文件新或者目标文件不存在时，才执行移动操作       |

常用例子：

- 修改文件/文件夹名

  ```shell
  mv aaa bbb
  mv aaa/ bbb/
  ```

- 移动文件/文件夹

  ```shell
  mv aaa dir/
  mv aaa/ dir/
  ```

- 批量移动文件，将一个目录下所有文件移动到另一个目录下

  ```shell
  mv aaa/* dir/
  ```

注意点：

- 至于到底是修改文件夹名还是移动文件夹，是要看目标文件夹是否存在的

  ```shell
  mv aaa/ bbb/
  #如果bbb文件夹不存在，则将aaa修改为bbb；如果bbb存在，则将aaa移动到bbb文件夹下
  #如果目标是多级路径，也是一样的道理
  ```

### 权限操作命令

#### 基本的权限了解

